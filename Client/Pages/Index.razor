@page "/"

@using System.Collections.Generic
@using System.Net.Http

@inject HttpClient httpClient

<h1>Hello, world!</h1>

Welcome to your new app.

Let's hook up to the Elite Dangerous Player Journal.

@foreach(var journal in journals)
{
    <p>
        @journal
    </p>
}

@* <SurveyPrompt Title="How is Blazor working for you?" /> *@

@code {


    List<string> journals = new List<string>();

    protected override async Task OnInitializedAsync()
    {
        string baseUri = "http://localhost:5000";
        string endpoint = "Journal";
        string uri = $@"{baseUri}/{endpoint}";

        var response = await httpClient.GetAsync(uri);
        var content = await response.Content.ReadAsStringAsync();
        journals = System.Text.Json.JsonSerializer.Deserialize<List<string>>(content);
    }
}